digraph BaremetalHost {
    Created [shape=house]
    Created -> Discovered [label="(without BMC access details)"]
    Created -> Registering [label="(with BMC access details)"]

    Discovered -> Registering [label="set BMC access details"]
    Discovered -> Deleted [label="!DeletionTimestamp.IsZero()"]

    Registering -> Inspecting [label="NeedsHardwareInspection()"]
    Registering -> RegistrationError [label=error]
    Registering -> Deleted [label="!DeletionTimestamp.IsZero()"]

    Inspecting -> Ready [label="done"]
    Inspecting -> Deleted [label="!DeletionTimestamp.IsZero()"]

    RegistrationError -> Registering [label="(user edits settings)"]
    RegistrationError -> Deleted [label="!DeletionTimestamp.IsZero()"]

    Ready [shape=doublecircle]
    Ready -> PreparingToProvision [label="NeedsProvisioning()"]
    Ready -> Deleted [label="!DeletionTimestamp.IsZero()"]

    PreparingToProvision -> ValidationError [label=error]
    PreparingToProvision -> MakingAvailable
    PreparingToProvision -> Deleted [label="!DeletionTimestamp.IsZero()"]

    ValidationError -> PreparingToProvision [label="(user edits settings)"]
    ValidationError -> Deleted [label="!DeletionTimestamp.IsZero()"]

    MakingAvailable -> Provisioning
    MakingAvailable -> Deleted [label="!DeletionTimestamp.IsZero()"]

    Provisioning -> Provisioned [label=done]
    Provisioning -> Deleted [label="!DeletionTimestamp.IsZero()"]

    Provisioned [shape=doublecircle]
    Provisioned -> Deprovisioning [label="NeedsDeprovisioning()"]
    Provisioned -> Deleted [label="!DeletionTimestamp.IsZero()"]

    Deleted [shape=doublecircle]

    Deprovisioning -> PreparingToProvision [label="NeedsProvisioning()"]
    Deprovisioning -> Deleted [label="!DeletionTimestamp.IsZero()"]
}
